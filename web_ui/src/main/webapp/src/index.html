<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org" class="no-js" lang="en" ng-app="jModeller" id="ng-app">

<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="styles/roboto.css" />
    <link rel="stylesheet" href="styles/material-icons.css" />
    <link rel="stylesheet" href="styles/material.green-indigo.min.css" />

    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/auth-service.css">

    <script src="auth_web_ui.js"></script>
</head>

<body>
    <script>
        var storedState = localStorage.getItem('model');
        var startingState = storedState ? JSON.parse(storedState) : null;

        var app = Elm.Main.fullscreen(startingState);

        app.ports.setStorage.subscribe(function(state) {
            localStorage.setItem('model', JSON.stringify(state));
        });

        app.ports.removeStorage.subscribe(function() {
            localStorage.removeItem('model');
        });

        app.ports.sendLogin.subscribe(function(msg) {
            app.ports.receiveLogin.send(msg);
        });

        app.ports.sendLogout.subscribe(function(msg) {
            app.ports.receiveLogout.send(msg);
        });

        app.ports.sendUnauthed.subscribe(function(msg) {
            app.ports.receiveUnauthed.send(msg);
        });
    </script>
</body>

</html>
