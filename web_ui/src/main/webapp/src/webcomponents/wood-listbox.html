<link rel="import" href="libs/polymer/polymer.html" />

<dom-module id="wood-listbox">
    <template>

        <style>
          :host {
            display: block;
            padding-top: 10px;
            padding-bottom: 10px;
            margin-bottom: 24px;
            border-top-width: 2px;
            border-top-color: grey;
            border-top-style: solid;
            border-bottom-width: 2px;
            border-bottom-style: solid;
            border-bottom-color: grey;
            width: 300px;

            background: var(--wood-listbox-background-color, --primary-background-color);
            color: var(--wood-listbox-color, --primary-text-color);

            @apply(--wood-listbox);
          }
        </style>

        <div id="embed"></div>
    </template>

    <script>
        (function() {
            var app;

            Polymer({
                is: "wood-listbox",
                properties: {
                    selected: {
                        type: Array,
                        notify: true,
                        value: [],
                        reflectToAttribute: true
                    },

                    initialItems: {
                        type: Array,
                        value: []
                    },

                    src: {
                        type: String
                    }
                },
                attached() {
                    console.log("attached : initial-items = " + this.initialItems)

                    app = Elm.Listbox.embed(this.$.embed, {
                        initialItems: this.initialItems
                    });

                    app.ports.setSelected.subscribe(items => {
                        this.selected = items;
                    });
                }
            });
        })();
    </script>
</dom-module>
